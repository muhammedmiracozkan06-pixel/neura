<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neura MAX | Wind Developer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <div id="auth-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 9999; display: flex; align-items: center; justify-content: center;">
        <div class="auth-card" style="text-align: center; color: white;">
            <h1 class="logo-text">Neura MAX</h1>
            <div id="login-options">
                <p>Giriş yapın</p>
                <div id="g_id_onload" data-client_id="897971776455-eh0lpcnpcecifps2kga7lqrh2r6o8ole.apps.googleusercontent.com" data-callback="onSignIn"></div>
                <div class="g_id_signin" data-type="standard" data-theme="filled_black"></div>
                <div style="margin: 20px 0;">VEYA</div>
                <button onclick="enterAsGuest()" class="guest-btn" style="padding: 10px 20px; cursor: pointer;">Misafir Olarak Devam Et</button>
            </div>
        </div>
    </div>

    <div id="main-app">
        <header id="header">
            <div class="brand">NEURA MAX <span id="u-tag"></span></div>
            <select id="model-select">
                <option value="llama-3.3-70b-versatile">Llama 3.3 (Zeki)</option>
                <option value="llama-3.1-8b-instant" selected>Llama 3.1 (Hızlı)</option>
                <option value="llama-3.2-3b-preview">Llama 3.2 (Yeni)</option>
            </select>
        </header>
        <div id="chat"></div>
        <div id="input-area">
            <input id="q" placeholder="Herhangi bir şey sor..." autocomplete="off">
            <button id="send-btn" onclick="talk()">GÖNDER</button>
        </div>
    </div>

    <script>
        // API KEY
        const GK = "gsk_7GisY7RNoHkLInxH6e10WGdyb3FYd2uX5YmRzX6n3R5pM6q8n9";

        // GİRİŞ FONKSİYONLARI
        function closeOverlay(name) {
            document.getElementById("auth-overlay").style.display = "none";
            document.getElementById("u-tag").innerText = " | " + name;
        }

        function onSignIn(response) {
            try {
                const data = JSON.parse(atob(response.credential.split('.')[1]));
                closeOverlay(data.given_name);
            } catch(e) { closeOverlay("Kullanıcı"); }
        }

        function enterAsGuest() {
            closeOverlay("Misafir");
        }

        // KONUŞMA FONKSİYONU
        async function talk() {
            const promptInput = document.getElementById("q");
            const prompt = promptInput.value.trim();
            const model = document.getElementById("model-select").value;
            const chat = document.getElementById("chat");

            if (!prompt) return;

            chat.innerHTML += `<div class="msg user"><b>Siz:</b> ${prompt}</div>`;
            promptInput.value = "";

            try {
                const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer " + GK,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [{role: "user", content: prompt}]
                    })
                });
                const data = await res.json();
                const reply = data.choices[0].message.content;
                chat.innerHTML += `<div class="msg ai"><b>Neura MAX:</b> ${reply}</div>`;
            } catch (e) {
                chat.innerHTML += `<div class="msg error">Hata: Bağlantı kurulamadı.</div>`;
            }
            chat.scrollTop = chat.scrollHeight;
        }
    </script>
</body>
</html>
